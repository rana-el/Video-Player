import QtQuick 2.12
import QtQuick.Controls 2.12
import QtMultimedia 5.12

Item {
    width: 640
    height: 480

    MediaPlayer {
        id: mediaPlayer
        autoPlay: false
    }

    FileDialog {
        id: fileDialog
        title: "Select a video file"
        selectMultiple: false
        nameFilters: ["Video files (*.mp4 *.avi *.mov)", "All files (*)"]
        onAccepted: {
            mediaPlayer.source = fileDialog.fileUrl
        }
    }

    Rectangle {
        id: videoRectangle
        anchors.fill: parent

        VideoOutput {
            anchors.fill: parent
            source: mediaPlayer
        }
    }

    Row {
        anchors {
            bottom: parent.bottom
            horizontalCenter: parent.horizontalCenter
            margins: 10
        }

        Button {
            text: mediaPlayer.playbackState === MediaPlayer.PlayingState ? "Pause" : "Play"
            onClicked: {
                if (mediaPlayer.playbackState === MediaPlayer.PlayingState) {
                    mediaPlayer.pause()
                } else {
                    mediaPlayer.play()
                }
            }
        }

        Slider {
            id: seekSlider
            width: parent.width - playButton.width - pauseButton.width - 20
            from: 0
            to: mediaPlayer.duration
            value: mediaPlayer.position
            onValueChanged: {
                mediaPlayer.position = value
            }
        }
    }

    Component.onCompleted: {
        fileDialog.open()
    }
}
